<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kanji & Vocabulary Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: linear-gradient(to bottom, #b179b9, #b179b9);
      text-align: center;
    }

    h1 {
      font-size: 2.5rem;
      color: white;
      margin-bottom: 20px;
    }

    .btn {
      padding: 10px 20px;
      font-size: 1.2em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: rgb(214, 169, 56);
      color: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      margin: 10px;
      min-width: 150px;
    }

    .choice-btn {
      background-color: white;
      color: black;
      border: 2px solid black;
    }

    .hidden {
      display: none;
    }

    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
      color: white;
      font-size: 1.2em;
    }

    .kanji {
      font-size: 6em;
      margin: 20px;
      color: #fff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .choice-option {
      background-color: white;
      color: black;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 8px 15px;
      font-size: 1.1em;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .choice-option:hover {
      background-color: #f0f0f0;
    }

    .score, .feedback {
      margin-top: 10px;
      font-size: 1.2em;
      color: white;
    }
  </style>
</head>
<body>

  <h1>Kanji & Vocabulary Quiz</h1>

  <!-- Choice Screen -->
  <div id="choiceScreen">
    <button class="btn choice-btn" onclick="selectCategory('kanji')">Kanji</button>
    <button class="btn choice-btn" onclick="selectCategory('vocab')">Vocabulary</button>
  </div>

  <!-- Checkbox Screen -->
  <div id="checkboxScreen" class="hidden">
    <div id="checkboxContainer" class="checkbox-group"></div>
    <button class="btn" onclick="startFromCheckbox()">Start</button>
    <button class="btn" onclick="goBackToChoice()">Back</button>
  </div>

  <!-- Game Screen -->
  <div id="gameScreen" class="hidden">
    <div class="kanji" id="kanji">?</div>
    <div class="choices" id="choices"></div>
    <div class="feedback" id="feedback"></div>
    <div class="score" id="score">Score: 0</div>
    <button class="btn" onclick="resetGame()">Restart</button>
    <button class="btn" onclick="goBackToCheckboxes()">Back</button>
  </div>

<script>
  const kanjiSets = {
    kanji1: [
{ kanji: "短い", reading: "みじかい" },
{ kanji: "短大", reading: "たんだい" },
{ kanji: "短時間", reading: "たんじかん" },
{ kanji: "低い", reading: "ひくい" },
{ kanji: "低下する", reading: "ていかする" },
{ kanji: "低温", reading: "ていおん" },
{ kanji: "教える", reading: "おしえる" },
{ kanji: "教会", reading: "きょうかい" },
{ kanji: "教育する", reading: "きょういくする" },
{ kanji: "教室", reading: "きょうしつ" },
{ kanji: "朝", reading: "あさ" },
{ kanji: "朝日", reading: "あさひ" },
{ kanji: "朝食", reading: "ちょうしょく" },
{ kanji: "昼", reading: "ひる" },
{ kanji: "昼寝", reading: "ひるね" },
{ kanji: "昼食", reading: "ちゅうしょく" },
{ kanji: "昼休み", reading: "ひるやすみ" },
{ kanji: "夜", reading: "よる" },
{ kanji: "夜食", reading: "やしょく" },
{ kanji: "今夜", reading: "こんや" },
{ kanji: "晩", reading: "ばん" },
{ kanji: "今晩", reading: "こんばん" },
{ kanji: "晩御飯", reading: "ばんごはん" },
{ kanji: "毎日", reading: "まいにち" },
{ kanji: "毎週", reading: "まいしゅう" },
{ kanji: "毎月", reading: "まい (つき/げつ)" },
{ kanji: "来週", reading: "らいしゅう" },
{ kanji: "週末", reading: "しゅうまつ" },
{ kanji: "先週", reading: "せんしゅう" },
{ kanji: "一週間", reading: "いっしゅうかん" },
{ kanji: "月曜日", reading: "げつようび" },
{ kanji: "火曜日", reading: "かようび" },
{ kanji: "水曜日", reading: "すいようび" },
{ kanji: "木曜日", reading: "もくようび" }
    ],
    kanji2: [
{ kanji: "作る", reading: "つくる" },
{ kanji: "作文", reading: "さくぶん" },
{ kanji: "作品", reading: "さくひん" },
{ kanji: "動作", reading: "どうさ" },
{ kanji: "泳ぐ", reading: "およぐ" },
{ kanji: "水泳", reading: "すいえい" },
{ kanji: "油", reading: "あぶら" },
{ kanji: "油絵", reading: "あぶらえ" },
{ kanji: "石油", reading: "せきゆ" },
{ kanji: "海", reading: "うみ" },
{ kanji: "海外", reading: "かいがい" },
{ kanji: "日本海", reading: "にほんかい" },
{ kanji: "海水", reading: "かいすい" },
{ kanji: "酒", reading: "さけ" },
{ kanji: "日本酒", reading: "にほんしゅ" },
{ kanji: "酒屋", reading: "さかや" },
{ kanji: "洋酒", reading: "ようしゅ" },
{ kanji: "待つ", reading: "まつ" },
{ kanji: "待合室", reading: "まちあいしつ" },
{ kanji: "招待する", reading: "しょうたいする" },
{ kanji: "学校", reading: "がっこう" },
{ kanji: "校長", reading: "こうちょう" },
{ kanji: "高校生", reading: "こうこうせい" },
{ kanji: "言う", reading: "いう" },
{ kanji: "言葉", reading: "ことば" },
{ kanji: "言語", reading: "げんご" },
{ kanji: "伝言", reading: "でんごん" }
    ],
    kanji3: [
{ kanji: "時計", reading: "とけい" },
{ kanji: "計画する", reading: "けいかくする" },
{ kanji: "体温計", reading: "たいおんけい" },
{ kanji: "日本語", reading: "にほんご" },
{ kanji: "英語", reading: "えいご" },
{ kanji: "物語", reading: "ものがたり" },
{ kanji: "ご飯", reading: "ごはん" },
{ kanji: "飯", reading: "めし" },
{ kanji: "夕飯", reading: "ゆうはん" },
{ kanji: "お宅", reading: "おたく" },
{ kanji: "住宅", reading: "じゅうたく" },
{ kanji: "自宅", reading: "じたく" },
{ kanji: "帰宅する", reading: "きたくする" },
{ kanji: "客", reading: "きゃく" },
{ kanji: "乗客", reading: "じょうきゃく" },
{ kanji: "教室", reading: "きょうしつ" },
{ kanji: "室内", reading: "しつない" },
{ kanji: "研究室", reading: "けんきゅうしつ" },
{ kanji: "家", reading: "いえ" },
{ kanji: "大家", reading: "おおや" },
{ kanji: "家族", reading: "かぞく" }
    ],
    kanji4: [
{ kanji: "英国", reading: "えいこく" },
{ kanji: "英語", reading: "えいご" },
{ kanji: "英和辞典", reading: "えいわじてん" },
{ kanji: "薬", reading: "くすり" },
{ kanji: "薬屋", reading: "くすりや" },
{ kanji: "目薬", reading: "めぐすり" },
{ kanji: "薬局", reading: "やっきょく" },
{ kanji: "会う", reading: "あう" },
{ kanji: "会話", reading: "かいわ" },
{ kanji: "会社", reading: "かいしゃ" },
{ kanji: "今", reading: "いま" },
{ kanji: "今月", reading: "こんげつ" },
{ kanji: "今年", reading: "ことし" },
{ kanji: "今日", reading: "きょう" },
{ kanji: "雪", reading: "ゆき" },
{ kanji: "雪国", reading: "ゆきぐに" },
{ kanji: "曇", reading: "くも" },
{ kanji: "電気", reading: "でんき" },
{ kanji: "電話", reading: "でんわ" },
{ kanji: "電車", reading: "でんしゃ" },
{ kanji: "売る", reading: "うる" },
{ kanji: "売店", reading: "ばいてん" },
{ kanji: "売り場", reading: "うりば" }
    ],
    kanji5: [
{ kanji: "広い", reading: "ひろい" },
{ kanji: "広島", reading: "ひろしま" },
{ kanji: "広さ", reading: "ひろさ" },
{ kanji: "広告", reading: "こうこく" },
{ kanji: "店", reading: "みせ" },
{ kanji: "書店", reading: "しょてん" },
{ kanji: "店員", reading: "てんいん" },
{ kanji: "本店", reading: "ほんてん" },
{ kanji: "一度", reading: "いちど" },
{ kanji: "温度", reading: "おんど" },
{ kanji: "今度", reading: "こんど" },
{ kanji: "速度", reading: "そくど" },
{ kanji: "病気", reading: "びょうき" },
{ kanji: "病院", reading: "びょういん" },
{ kanji: "病人", reading: "びょうにん" },
{ kanji: "疲れる", reading: "つかれる" },
{ kanji: "疲れ", reading: "つかれ" },
{ kanji: "痛い", reading: "いたい" },
{ kanji: "痛み止め", reading: "いたみどめ" },
{ kanji: "痛む", reading: "いたむ" },
{ kanji: "頭痛", reading: "ずつう" }
    ]
  };

  const vocabSets = {
    vocab1: [
{ kanji: "check", reading: "みます" },
{ kanji: "look for, search", reading: "さがします" },
{ kanji: "be late [for an appointment, etc.]", reading: "おくれます" },
{ kanji: "be in time [for an appointment, etc.]", reading: "まにあいます" },
{ kanji: "do", reading: "やります" },
{ kanji: "attend [a party]", reading: "さんかします" },
{ kanji: "apply for, enter for", reading: "もうしこみます" },
{ kanji: "convenient (concerning time)", reading: "つごうがいい" },
{ kanji: "inconvenient (concerning time)", reading: "つごうがわるい" },
{ kanji: "feel well", reading: "きぶんがいい" },
{ kanji: "feel ill", reading: "きぶんがわるい" },
{ kanji: "newspaper publishing company, newspaper office", reading: "しんぶんしゃ" },
{ kanji: "judo", reading: "じゅうどう" },
{ kanji: "athletic meeting", reading: "うんどうかい" },
{ kanji: "place", reading: "ばしょ" },
{ kanji: "volunteer", reading: "ボランティア" },
{ kanji: "~ dialect", reading: "～べん" },
{ kanji: "next time, another time", reading: "こんど" },
{ kanji: "pretty, very", reading: "ずいぶん" },
{ kanji: "directly", reading: "ちょくせつ" },
{ kanji: "any time", reading: "いつでも" },
{ kanji: "anywhere", reading: "どこでも" },
{ kanji: "anybody", reading: "だれでも" },
{ kanji: "anything", reading: "なんでも" },
{ kanji: "like this", reading: "こんな～" },
{ kanji: "like that (near the listener)", reading: "そんな～" },
{ kanji: "like that (far from both the speaker and the listener)", reading: "あんな～" },
{ kanji: "[boxes] be put in order", reading: "かたづきます" },
{ kanji: "garbage, trash, dust", reading: "ごみ" },
{ kanji: "put out [the trash]", reading: "だします" },
{ kanji: "[trash] burn", reading: "もえます" },
{ kanji: "Monday, Wednesday and Friday", reading: "げつ・すい・きん" },
{ kanji: "place where something is put", reading: "おきば" },
{ kanji: "side", reading: "よこ" },
{ kanji: "bottle", reading: "びん" },
{ kanji: "can", reading: "かん" },
{ kanji: "hot water", reading: "おゆ" },
{ kanji: "gas", reading: "ガス" },
{ kanji: "~ company", reading: "～がいしゃ" },
{ kanji: "contact", reading: "れんらくします" },
{ kanji: "What shall I do?", reading: "こまったなあ" },
{ kanji: "electronic mail", reading: "でんしメール" },
{ kanji: "space, universe", reading: "うちゅう" },
{ kanji: "be afraid of", reading: "こわい" },
{ kanji: "spaceship", reading: "うちゅうせん" },
{ kanji: "another", reading: "べつの" },
{ kanji: "astronaut", reading: "うちゅうひこうし" }
    ],
    vocab2: [
{ kanji: "keep (a pet), raise (an animal)", reading: "かいます" },
{ kanji: "build", reading: "たてます" },
{ kanji: "run, drive [along a road]", reading: "はしります" },
{ kanji: "take [a holiday]", reading: "とります" },
{ kanji: "[a mountain] can be seen", reading: "みえます" },
{ kanji: "[a sound] can be heard", reading: "きこえます" },
{ kanji: "[an airport] be made, be completed, come into existence", reading: "できます" },
{ kanji: "set up [a class], open, hold", reading: "ひらきます" },
{ kanji: "pet", reading: "ペット" },
{ kanji: "bird", reading: "とり" },
{ kanji: "voice", reading: "こえ" },
{ kanji: "wave", reading: "なみ" },
{ kanji: "fireworks", reading: "はなび" },
{ kanji: "scenery, view", reading: "けしき" },
{ kanji: "daytime", reading: "ひるま" },
{ kanji: "old days, ancient times", reading: "むかし" },
{ kanji: "tool, instrument, equipment", reading: "どうぐ" },
{ kanji: "vending machine", reading: "じどうはんばいき" },
{ kanji: "mail order, mail-order sales", reading: "つうしんはんばい" },
{ kanji: "(dry) cleaning, laundry", reading: "クリーニング" },
{ kanji: "condominium, apartment house", reading: "マンション" },
{ kanji: "kitchen", reading: "だいどころ" },
{ kanji: "~ class", reading: "～きょうしつ" },
{ kanji: "party room", reading: "パーティールーム" },
{ kanji: "after ~ (duration of time)", reading: "～ご" },
{ kanji: "only ~ (used with negatives)", reading: "～しか" },
{ kanji: "other", reading: "ほかの" },
{ kanji: "clearly", reading: "はっきり" },
{ kanji: "almost all (in affirmative sentences) hardly, scarcely (in negative sentences)", reading: "ほとんど" },
{ kanji: "Kansai International Airport", reading: "関西空港" },
{ kanji: "name of a shopping district in Tokyo with many electrical stores", reading: "秋葉原" },
{ kanji: "peninsula in Shizuoka Prefecture", reading: "伊豆" },
{ kanji: "Sunday carpenter", reading: "日曜大工" },
{ kanji: "bookshelf", reading: "本棚" },
{ kanji: "dream (～を みます: have a dream)", reading: "夢" },
{ kanji: "someday, sometime", reading: "いつか" },
{ kanji: "house, home", reading: "家" },
{ kanji: "marvelous, wonderful", reading: "すばらしい" },
{ kanji: "children", reading: "子どもたち" },
{ kanji: "like very much", reading: "大好き[な]" },
{ kanji: "cartoon, comic strip", reading: "漫画" },
{ kanji: "hero, heroine", reading: "主人公" },
{ kanji: "shape", reading: "形" },
{ kanji: "robot", reading: "ロボット" },
{ kanji: "fantastic, mysterious", reading: "不思議[な]" },
{ kanji: "pocket", reading: "ポケット" },
{ kanji: "for example", reading: "例えば" },
{ kanji: "attach, put on", reading: "付けます II" },
{ kanji: "freely", reading: "自由に" },
{ kanji: "sky", reading: "空" },
{ kanji: "fly", reading: "飛びます I" },
{ kanji: "oneself", reading: "自分" },
{ kanji: "future", reading: "将来" }
    ],
    vocab3: [
{ kanji: "sell, be sold", reading: "うれます" },
{ kanji: "dance", reading: "おどります" },
{ kanji: "chew, bite", reading: "かみます" },
{ kanji: "choose", reading: "えらびます" },
{ kanji: "be different", reading: "ちがいます" },
{ kanji: "go to and from", reading: "かよいます" },
{ kanji: "take a memo", reading: "メモします" },
{ kanji: "serious", reading: "まじめ" },
{ kanji: "earnest", reading: "ねっしん" },
{ kanji: "gentle, kind", reading: "やさしい" },
{ kanji: "great, admirable", reading: "えらい" },
{ kanji: "proper, just right", reading: "ちょうどいい" },
{ kanji: "custom", reading: "しゅうかん" },
{ kanji: "experience", reading: "けいけん" },
{ kanji: "power", reading: "ちから" },
{ kanji: "popularity", reading: "にんき" },
{ kanji: "form, shape", reading: "かたち" },
{ kanji: "color", reading: "いろ" },
{ kanji: "taste", reading: "あじ" },
{ kanji: "chewing gum", reading: "ガム" },
{ kanji: "goods", reading: "しなもの" },
{ kanji: "price", reading: "ねだん" },
{ kanji: "salary", reading: "きゅうりょう" },
{ kanji: "bonus", reading: "ボーナス" },
{ kanji: "program", reading: "ばんぐみ" },
{ kanji: "drama", reading: "ドラマ" },
{ kanji: "novel", reading: "しょうせつ" },
{ kanji: "novelist", reading: "しょうせつか" },
{ kanji: "singer", reading: "かしゅ" },
{ kanji: "janitor", reading: "かんりにん" },
{ kanji: "son", reading: "むすこ" },
{ kanji: "son", reading: "むすこさん" },
{ kanji: "daughter", reading: "むすめ" },
{ kanji: "daughter", reading: "むすめさん" },
{ kanji: "oneself", reading: "じぶん" },
{ kanji: "future", reading: "しょうらい" },
{ kanji: "a little while", reading: "しばらく" },
{ kanji: "usually, mostly", reading: "たいてい" },
{ kanji: "in addition", reading: "それに" },
{ kanji: "and so", reading: "それで" },
{ kanji: "I have a favor to ask.", reading: "おねがいがあるんですが" },
{ kanji: "homestay", reading: "ホームステイ" },
{ kanji: "conversation", reading: "かいわ" },
{ kanji: "chat", reading: "おしゃべりします" },
{ kanji: "notice", reading: "おしらせ" },
{ kanji: "date", reading: "ひにち" },
{ kanji: "Saturday", reading: "ど" },
{ kanji: "gymnasium", reading: "たいいくかん" },
{ kanji: "free of charge", reading: "むりょう" }
    ],
    vocab4: [
{ kanji: "open", reading: "あきます" },
{ kanji: "close, shut", reading: "しまります" },
{ kanji: "come on", reading: "つきます" },
{ kanji: "go off, disappear", reading: "きえます" },
{ kanji: "get crowded", reading: "こみます" },
{ kanji: "get empty", reading: "すきます" },
{ kanji: "break", reading: "こわれます" },
{ kanji: "break, smash", reading: "われます" },
{ kanji: "break, snap", reading: "おれます" },
{ kanji: "tear", reading: "やぶれます" },
{ kanji: "get dirty", reading: "よごれます" },
{ kanji: "be attached", reading: "つきます" },
{ kanji: "be undone", reading: "はずれます" },
{ kanji: "stop", reading: "とまります" },
{ kanji: "make a mistake", reading: "まちがえます" },
{ kanji: "drop, lose", reading: "おとします" },
{ kanji: "be locked", reading: "かかります" },
{ kanji: "plate, dish", reading: "おさら" },
{ kanji: "rice bowl", reading: "おちゃわん" },
{ kanji: "glass (vessel)", reading: "コップ" },
{ kanji: "glass (material)", reading: "ガラス" },
{ kanji: "bag", reading: "ふくろ" },
{ kanji: "wallet, purse", reading: "さいふ" },
{ kanji: "branch, twig", reading: "えだ" },
{ kanji: "station employee", reading: "えきいん" },
{ kanji: "this neighborhood, around here", reading: "このへん" },
{ kanji: "the place around", reading: "～へん" },
{ kanji: "about this size", reading: "このくらい" },
{ kanji: "After you./Go ahead, please.", reading: "おさきにどうぞ" },
{ kanji: "Thank goodness!", reading: "よかった。" },
{ kanji: "the train which has just left", reading: "いまのでんしゃ" },
{ kanji: "things left behind, lost property", reading: "わすれもの" },
{ kanji: "side", reading: "～がわ" },
{ kanji: "pocket", reading: "ポケット" },
{ kanji: "I don’t remember.", reading: "おぼえていません。" },
{ kanji: "rack", reading: "たな" },
{ kanji: "I suppose, if I am correct", reading: "たしか" },
{ kanji: "name of a station in Tokyo", reading: "よつや" },
{ kanji: "earthquake", reading: "じしん" },
{ kanji: "wall", reading: "かべ" },
{ kanji: "hands (of a clock)", reading: "はり" },
{ kanji: "point", reading: "さします" },
{ kanji: "the area in front of a station", reading: "えきまえ" },
{ kanji: "fall down", reading: "たおれます" },
{ kanji: "west", reading: "にし" },
{ kanji: "direction", reading: "ほう" }
    ],
    vocab5: [
{ kanji: "put up, post, paste", reading: "はります" },
{ kanji: "hang", reading: "かけます" },
{ kanji: "display, decorate", reading: "かざります" },
{ kanji: "arrange, line up", reading: "ならべます" },
{ kanji: "plant", reading: "うえます" },
{ kanji: "return, put back", reading: "もどします" },
{ kanji: "put together, put in shape, sum up", reading: "まとめます" },
{ kanji: "put things in order, tidy up", reading: "かたづけます" },
{ kanji: "put things in their proper place", reading: "しまいます" },
{ kanji: "decide", reading: "きめます" },
{ kanji: "inform", reading: "しらせます" },
{ kanji: "consult, discuss", reading: "そうだんします" },
{ kanji: "prepare one’s lesson", reading: "よしょうします" },
{ kanji: "review one’s lesson", reading: "ふくしゅうします" },
{ kanji: "leave things as they are", reading: "そのままにします" },
{ kanji: "child", reading: "おこさん" },
{ kanji: "class", reading: "じゅぎょう" },
{ kanji: "lecture", reading: "こうぎ" },
{ kanji: "meeting", reading: "ミーティング" },
{ kanji: "plan, schedule", reading: "よてい" },
{ kanji: "notice", reading: "おしらせ" },
{ kanji: "guide book", reading: "あんないしょ" },
{ kanji: "calendar", reading: "カレンダー" },
{ kanji: "poster", reading: "ポスター" },
{ kanji: "trash can, dustbin", reading: "ごみばこ" },
{ kanji: "doll", reading: "にんぎょう" },
{ kanji: "vase", reading: "かびん" },
{ kanji: "mirror", reading: "かがみ" },
{ kanji: "drawer", reading: "ひきだし" },
{ kanji: "front door, porch, entrance hall", reading: "げんかん" },
{ kanji: "corridor, hallway", reading: "ろうか" },
{ kanji: "wall", reading: "かべ" },
{ kanji: "pond", reading: "いけ" },
{ kanji: "police box", reading: "こうばん" },
{ kanji: "original place", reading: "もとのところ" },
{ kanji: "round, around", reading: "まわり" },
{ kanji: "center", reading: "まんなか" },
{ kanji: "corner", reading: "すみ" },
{ kanji: "still", reading: "まだ" },
{ kanji: "about", reading: "～ほど" },
{ kanji: "schedule", reading: "よていひょう" },
{ kanji: "Thank you for your hard work.", reading: "ごくろうさま" },
{ kanji: "hope, request", reading: "きぼう" },
{ kanji: "Do you have any requests?", reading: "なにかごきぼうがありますか。" },
{ kanji: "musical", reading: "ミュージカル" },
{ kanji: "That’s a good idea./That sounds nice.", reading: "それはいいですね。" },
{ kanji: "Broadway", reading: "ブロードウェイ" },
{ kanji: "round", reading: "まるい" },
{ kanji: "moon", reading: "つき" },
{ kanji: "one, a certain", reading: "ある" },
{ kanji: "earth", reading: "ちきゅう" },
{ kanji: "glad, happy", reading: "うれしい" },
{ kanji: "hateful, disagreeable", reading: "いや" },
{ kanji: "and, then", reading: "すると" },
{ kanji: "wake up", reading: "めがさめます" }
    ],
    vocab6: [
{ kanji: "begin, start", reading: "はじまります" },
{ kanji: "continue", reading: "つづけます" },
{ kanji: "find", reading: "みつけます" },
{ kanji: "take", reading: "うけます" },
{ kanji: "enter", reading: "にゅうがくします" },
{ kanji: "graduate", reading: "そつぎょうします" },
{ kanji: "attend", reading: "しゅっせきします" },
{ kanji: "take a break, take a rest", reading: "きゅうけいします" },
{ kanji: "consecutive holidays", reading: "れんきゅう" },
{ kanji: "essay, composition", reading: "さくぶん" },
{ kanji: "exhibition", reading: "てんらんかい" },
{ kanji: "wedding ceremony", reading: "けっこんしき" },
{ kanji: "funeral", reading: "おそうしき" },
{ kanji: "ceremony", reading: "しき" },
{ kanji: "head office", reading: "ほんしゃ" },
{ kanji: "branch office", reading: "してん" },
{ kanji: "church", reading: "きょうかい" },
{ kanji: "graduate school", reading: "だいがくいん" },
{ kanji: "zoo", reading: "どうぶつえん" },
{ kanji: "hot spring, spa", reading: "おんせん" },
{ kanji: "visitor, guest, customer, client", reading: "お客さん" },
{ kanji: "somebody", reading: "だれか" },
{ kanji: "place toward , direction of", reading: "～のほう" },
{ kanji: "all the time", reading: "ずっと" },
{ kanji: "Pablo Picasso, Spanish painter 1881-1973", reading: "ピカソ" },
{ kanji: "Ueno Park in Tokyo", reading: "うえのこうえん" },
{ kanji: "remain, be left", reading: "のこります" },
{ kanji: "per month", reading: "つきに" },
{ kanji: "ordinary, common, usual", reading: "ふつうの" },
{ kanji: "Internet", reading: "インターネット" },
{ kanji: "village", reading: "むら" },
{ kanji: "movie theater", reading: "えいがかん" },
{ kanji: "hateful, disagreeable", reading: "いや" },
{ kanji: "sky", reading: "そら" },
{ kanji: "close", reading: "とじます" },
{ kanji: "city", reading: "とかい" },
{ kanji: "children", reading: "こどもたち" },
{ kanji: "freely", reading: "じゆうに" },
{ kanji: "all over the world", reading: "せかいじゅう" },
{ kanji: "gather", reading: "あつまります" },
{ kanji: "beautiful", reading: "うつくしい" },
{ kanji: "nature", reading: "しぜん" },
{ kanji: "goodness, virtue", reading: "すばらしさ" },
{ kanji: "notice, become aware of", reading: "きがつきます" }
    ],
    vocab7: [
{ kanji: "take exercise", reading: "うんどうします" },
{ kanji: "succeed", reading: "せいこうします" },
{ kanji: "fail", reading: "しっぱいします" },
{ kanji: "pass", reading: "ごうかくします" },
{ kanji: "return", reading: "もどります" },
{ kanji: "stop", reading: "やみます" },
{ kanji: "clear up", reading: "はれます" },
{ kanji: "get cloudy", reading: "くもります" },
{ kanji: "blow", reading: "ふきます" },
{ kanji: "recover from, get well", reading: "なおります" },
{ kanji: "be fixed, be repaired", reading: "なおります" },
{ kanji: "continue", reading: "つづきます" },
{ kanji: "catch", reading: "ひきます" },
{ kanji: "cool", reading: "ひやします" },
{ kanji: "worried, anxious", reading: "しんぱい" },
{ kanji: "enough, sufficient", reading: "じゅうぶん" },
{ kanji: "strange, funny", reading: "おかしい" },
{ kanji: "noisy", reading: "うるさい" },
{ kanji: "burning", reading: "やけど" },
{ kanji: "injury", reading: "けが" },
{ kanji: "cough", reading: "せき" },
{ kanji: "influenza", reading: "インフルエンザ" },
{ kanji: "sky", reading: "そら" },
{ kanji: "sun", reading: "たいよう" },
{ kanji: "star", reading: "ほし" },
{ kanji: "moon", reading: "つき" },
{ kanji: "wind", reading: "かぜ" },
{ kanji: "north", reading: "きた" },
{ kanji: "south", reading: "みなみ" },
{ kanji: "west", reading: "にし" },
{ kanji: "east", reading: "ひがし" },
{ kanji: "faucet, tap, water supply", reading: "すいどう" },
{ kanji: "engine", reading: "エンジン" },
{ kanji: "team", reading: "チーム" },
{ kanji: "this evening", reading: "こんや" },
{ kanji: "late afternoon", reading: "ゆうがた" },
{ kanji: "a time in the past, before", reading: "まえ" },
{ kanji: "late (time)", reading: "おそく" },
{ kanji: "like this", reading: "こんなに" },
{ kanji: "like that", reading: "そんなに" },
{ kanji: "like that, that much", reading: "あんなに" },
{ kanji: "possibly, perhaps", reading: "もしかしたら" },
{ kanji: "That’s too bad.", reading: "それは いけませんね。" },
{ kanji: "Olympic Games", reading: "オリンピック" },
{ kanji: "vigor", reading: "げんき" },
{ kanji: "stomach", reading: "い" },
{ kanji: "working too much", reading: "はたらきすぎ" },
{ kanji: "stress", reading: "ストレス" },
{ kanji: "work more than one’s capacity", reading: "むりをします" },
{ kanji: "take one’s time", reading: "ゆっくりします" },
{ kanji: "horoscope", reading: "ほしうらない" },
{ kanji: "Taurus", reading: "おうしざ" },
{ kanji: "be in trouble, have a problem", reading: "こまります" },
{ kanji: "lottery", reading: "たからくじ" },
{ kanji: "win", reading: "あたります" },
{ kanji: "health", reading: "けんこう" },
{ kanji: "romantic love", reading: "れんあい" },
{ kanji: "sweetheart, boyfriend, girlfriend", reading: "こいびと" },
{ kanji: "rich person", reading: "おかねもち" }
    ]
  };

  let mainArray = [];
  let currentCategory = "";
  let score = 0;
  let answered = [];
  let shuffledQuestions = [];
  let currentQuestion = {};

  function selectCategory(category) {
    currentCategory = category;
    document.getElementById("choiceScreen").classList.add("hidden");
    document.getElementById("checkboxScreen").classList.remove("hidden");
    buildCheckboxes();
  }

  function buildCheckboxes() {
    const container = document.getElementById("checkboxContainer");
    container.innerHTML = "";
    const sets = currentCategory === "kanji" ? kanjiSets : vocabSets;
    container.innerHTML += `<label><input type="checkbox" id="all" onchange="toggleAll(this)"> All</label>`;
    Object.keys(sets).forEach((key, i) => {
      const label = currentCategory === "kanji" ? `N4_Week ${i+2}` : `Lesson ${i+26}`;
      container.innerHTML += `<label><input type="checkbox" class="setBox" value="${key}"> ${label}</label>`;
    });
  }

  function toggleAll(allBox) {
    document.querySelectorAll(".setBox").forEach(cb => cb.checked = allBox.checked);
  }

  function buildMainArray() {
    mainArray = [];
    const sets = currentCategory === "kanji" ? kanjiSets : vocabSets;
    document.querySelectorAll(".setBox:checked").forEach(cb => {
      mainArray.push(...sets[cb.value]);
    });
  }

  function startFromCheckbox() {
    buildMainArray();
    if (mainArray.length === 0) {
      alert("Please select at least one option!");
      return;
    }
    document.getElementById("checkboxScreen").classList.add("hidden");
    document.getElementById("gameScreen").classList.remove("hidden");
    resetGame();
  }

  function resetGame() {
    score = 0;
    answered = [];
    shuffledQuestions = shuffle([...mainArray]);
    document.getElementById("score").textContent = `Score: ${score}`;
    document.getElementById("feedback").textContent = "";
    document.getElementById("kanji").textContent = "?";
    pickQuestion();
  }

  function pickQuestion() {
    if (answered.length === mainArray.length) {
      document.getElementById("kanji").textContent = "🎉";
      document.getElementById("choices").innerHTML = "";
      document.getElementById("feedback").textContent = "Congratulations! You answered all correctly!";
      return;
    }

    if (shuffledQuestions.length === 0) {
      shuffledQuestions = shuffle(mainArray.filter(k => !answered.includes(k.kanji)));
    }

    currentQuestion = shuffledQuestions.pop();
    document.getElementById("kanji").textContent = currentQuestion.kanji;

    const otherReadings = shuffle(mainArray.filter(k => k.reading !== currentQuestion.reading));
    const options = shuffle([
      currentQuestion.reading,
      otherReadings[0]?.reading || currentQuestion.reading,
      otherReadings[1]?.reading || currentQuestion.reading
    ]);

    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = "";
    options.forEach(option => {
      const btn = document.createElement("button");
      btn.textContent = option;
      btn.classList.add("choice-option");
      btn.onclick = () => checkAnswer(option);
      choicesDiv.appendChild(btn);
    });
  }

  function checkAnswer(answer) {
    const feedback = document.getElementById("feedback");
    if (answer === currentQuestion.reading) {
      score++;
      if (!answered.includes(currentQuestion.kanji)) answered.push(currentQuestion.kanji);
      feedback.textContent = "Correct!";
      document.getElementById("score").textContent = `Score: ${score}`;
      setTimeout(() => {
        feedback.textContent = "";
        pickQuestion();
      }, 500); // ✅ 0.5s for correct
    } else {
      feedback.textContent = `Wrong! Correct was: ${currentQuestion.reading}`;
      setTimeout(() => {
        feedback.textContent = "";
        pickQuestion();
      }, 1000); // ✅ 1s for wrong
    }
  }

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function goBackToCheckboxes() {
    document.getElementById("gameScreen").classList.add("hidden");
    document.getElementById("checkboxScreen").classList.remove("hidden");
  }

  function goBackToChoice() {
    document.getElementById("checkboxScreen").classList.add("hidden");
    document.getElementById("choiceScreen").classList.remove("hidden");
  }
</script>
</body>
</html>
